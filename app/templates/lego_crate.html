{% extends 'base.html' %}

{% block main %}

    <div class="jumbotron">
        <h1>Inventory</h1>
        Set overview and information
    </div>

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">LEGO Crate</h5>
        </div>
        <div class="media">
            <div class="media-body">
                LEGO set containing all unassigned parts.
            </div>
            <img src="{{set_data.thumbnail_url}}" class="align-self-center crop ml-3"  alt="sheep">
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <div class="form-group input-group-sm d-flex mb-0">
                <input class="form-control" type="search" id="table_search" name="table_search" onkeyup="searchTable()" placeholder="Search">
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-sm table-striped" id="searchable_table">
                <thead>
                <tr>
                    <th scope="col">No</th>
                    <th scope="col">Image</th>
                    <th scope="col">Name</th>
                    <th scope="col">Color "Code"</th>
                    <th scope="col">Qty</th>
                    <th scope="col">Alternate</th>
                    <th scope="col">Counterpart</th>
                </tr>
                </thead>
                <tbody>
                {% for part in parts_list %}
                    {% if part.owned_quantity > 0 %}
                        <tr>
                            <td scope="row">{{ part.no }}</td>
                            <td><img src={{ part.thumbnail_url }} alt="sheep" class="img-fluid img-thumbnail"></td>
                            <td>{{ part.name }}</td>
                            <td>{{ part.color_name }} "{{ part.color_code }}"</td>
                            {% if part.owned_quantity < part.quantity %}
                                <td class="text-danger">{{ part.owned_quantity }}</td>
                            {% elif part.owned_quantity < part.quantity + part.extra_quantity %}
                                <td class="text-warning">{{ part.owned_quantity }}</td>
                            {% else %}
                                <td>{{ part.owned_quantity }}</td>
                            {% endif %}
                            <td>{{ part.is_alternate }}</td>
                            <td>{{ part.is_counterpart }}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <form action="/remove_set/{{ set_data.no }}" method='POST'>
        <button type="submit" class="btn btn-danger">Remove from collection</button>
    </form>

{% endblock %}